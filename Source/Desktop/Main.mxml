<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication
	xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
	xmlns:clg="Desktop.Application.*"
	xmlns:clgdoc="Collage.Document.*"
	menu="{nativeMenu}"
	showStatusBar="false"
	minHeight="480"	minWidth="640"
	height="700" width="1000"
	title="Collage"
	applicationComplete="Initialize()"
	>
	<fx:Script><![CDATA[
		import Desktop.Application.*;
		import mx.controls.Alert;
		import Collage.Clip.*;
		
		private var app:AppMain;
		
		private function Initialize():void
		{
			app = new AppMain(editDoc);
			nativeMenu.collageApp = app;
			editDoc.toolbar = toolbar;
		}
		
		private function Fullscreen():void
		{
			if (stage.displayState == StageDisplayState.FULL_SCREEN_INTERACTIVE)
				stage.displayState = StageDisplayState.NORMAL;
			else
				stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
		}
		
		protected function ClickHandler(event:MouseEvent):void
		{
			if(event) {
				if (event.target is EditDocument) {
					app.document.DeselectAll();
				}
			}
		}
	]]></fx:Script>
	<fx:Declarations>
		<clg:CollageMenu id="nativeMenu" showRoot="false"
			labelField="@label"	keyEquivalentField="@key" mnemonicIndexField="@mnemonicIndex" />
	</fx:Declarations>

	<s:SkinnableContainer id="toolbar" right="0" left="0" top="0" bottom="45" />

	<s:BorderContainer id="docContainer" backgroundColor="0x555555"
		borderWeight="0" borderColor="0xffffff" dropShadowVisible="false"
		right="0" left="0" top="45" bottom="20">
		<s:Scroller hasFocusableChildren="true" tabEnabled="false">
			<s:Group horizontalScrollPosition="20" verticalScrollPosition="30" top="0" bottom="0" right="0" left="0" clipAndEnableScrolling="true">
				<s:BorderContainer top="50" bottom="50" right="50" left="50"
					borderWeight="0" borderColor="0xffffff" 
					dropShadowVisible="true" backgroundColor="0xffffff">
					<clgdoc:EditDocument id="editDoc" width="1024" height="768" click="ClickHandler(event);"/>
				</s:BorderContainer>
			</s:Group>
		</s:Scroller>
	</s:BorderContainer>

	<s:SkinnableContainer id="appStatusBar" right="0" left="0" height="45" bottom="0" />
</s:WindowedApplication>